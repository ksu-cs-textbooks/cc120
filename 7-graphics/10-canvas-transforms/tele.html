




  
	
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Much like we can use CSS to apply transformations to HTML elements, we can use transforms to change how we draw into a canvas. The rendering context has a transformation matrix much like those we discussed in the CSS chapter, and it applies this transform to any point it is tasked with drawing.
We can replace the current transformation matrix with the setTransform() function, or multiply it by a new transformation (effectively combining the current transformation with the new one) by calling transform().">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Transforms and State :: K-State CC 120 Textbook">
    <meta name="twitter:description" content="Much like we can use CSS to apply transformations to HTML elements, we can use transforms to change how we draw into a canvas. The rendering context has a transformation matrix much like those we discussed in the CSS chapter, and it applies this transform to any point it is tasked with drawing.
We can replace the current transformation matrix with the setTransform() function, or multiply it by a new transformation (effectively combining the current transformation with the new one) by calling transform().">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc120/7-graphics/10-canvas-transforms/">
    <meta property="og:site_name" content="K-State CC 120 Textbook">
    <meta property="og:title" content="Transforms and State :: K-State CC 120 Textbook">
    <meta property="og:description" content="Much like we can use CSS to apply transformations to HTML elements, we can use transforms to change how we draw into a canvas. The rendering context has a transformation matrix much like those we discussed in the CSS chapter, and it applies this transform to any point it is tasked with drawing.
We can replace the current transformation matrix with the setTransform() function, or multiply it by a new transformation (effectively combining the current transformation with the new one) by calling transform().">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Graphics">
    <meta property="article:published_time" content="2018-08-24T10:53:26-05:00">
    <meta property="article:modified_time" content="2022-11-13T15:40:36-06:00">
    <meta itemprop="name" content="Transforms and State :: K-State CC 120 Textbook">
    <meta itemprop="description" content="Much like we can use CSS to apply transformations to HTML elements, we can use transforms to change how we draw into a canvas. The rendering context has a transformation matrix much like those we discussed in the CSS chapter, and it applies this transform to any point it is tasked with drawing.
We can replace the current transformation matrix with the setTransform() function, or multiply it by a new transformation (effectively combining the current transformation with the new one) by calling transform().">
    <meta itemprop="datePublished" content="2018-08-24T10:53:26-05:00">
    <meta itemprop="dateModified" content="2022-11-13T15:40:36-06:00">
    <meta itemprop="wordCount" content="401">
    <title>Transforms and State :: K-State CC 120 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc120/7-graphics/10-canvas-transforms/" rel="canonical" type="text/html" title="Transforms and State :: K-State CC 120 Textbook">
    <link href="/cc120/7-graphics/10-canvas-transforms/index.xml" rel="alternate" type="application/rss+xml" title="Transforms and State :: K-State CC 120 Textbook">
    <link href="/cc120/7-graphics/10-canvas-transforms/index.print.html" rel="alternate" type="text/html" title="Transforms and State :: K-State CC 120 Textbook">
    <link href="/cc120/7-graphics/10-canvas-transforms/embed.html" rel="alternate" type="text/html" title="Transforms and State :: K-State CC 120 Textbook">
    <link href="/cc120/css/fontawesome-all.min.css?1737134839" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc120/css/fontawesome-all.min.css?1737134839" rel="stylesheet"></noscript>
    <link href="/cc120/css/nucleus.css?1737134839" rel="stylesheet">
    <link href="/cc120/css/auto-complete.css?1737134839" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc120/css/auto-complete.css?1737134839" rel="stylesheet"></noscript>
    <link href="/cc120/css/perfect-scrollbar.min.css?1737134839" rel="stylesheet">
    <link href="/cc120/css/fonts.css?1737134839" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc120/css/fonts.css?1737134839" rel="stylesheet"></noscript>
    <link href="/cc120/css/theme.css?1737134839" rel="stylesheet">
    <link href="/cc120/css/theme-auto.css?1737134839" rel="stylesheet" id="R-variant-style">
    <link href="/cc120/css/chroma-auto.css?1737134839" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cc120/css/variant.css?1737134839" rel="stylesheet">
    <link href="/cc120/css/print.css?1737134839" rel="stylesheet" media="print">
    <script src="/cc120/js/variant.js?1737134839"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc120';
      window.index_js_url="/cc120/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cc120/css/custom.css?1737134839" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cc120/7-graphics/10-canvas-transforms/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="transforms-and-state">Transforms and State</h1>

<p>Much like we can use CSS to apply transformations to HTML elements, we can use transforms to change how we draw into a canvas. The rendering context has a transformation matrix much like those we discussed in the CSS chapter, and it applies this transform to any point it is tasked with drawing.</p>
<p>We can replace the current transformation matrix with the <code>setTransform()</code> function, or multiply it by a new transformation (effectively combining the current transformation with the new one) by calling <code>transform()</code>.</p>
<p>With this in mind, it can be useful to know two other functions of the context, <code>save()</code> and <code>restore()</code>.  These save the current context state by pushing and popping from a stack.  Think of it as a pile of papers. When we call <code>save()</code> we write down the current state of the context object, and drop that paper in the stack.  When we call <code>restore()</code>, we take the topmost paper from the stack, and set context&rsquo;s state back to what was written on that sheet.</p>
<p>So what exactly constitutes the state of our rendering context? As you might imagine, this includes the transformation matrix we just talked about.  But it <em>also</em> includes all of the stroke and fill properties.</p>
<p>Now, back to the transforms.  As with CSS transforms, we can define the matrix ourselves, but there also exist a number of helper functions we can leverage, specifically:</p>
<ul>
<li><code>translate(tx, ty)</code> translates by <code>tx</code> in the x axis, and <code>ty</code> along the y</li>
<li><code>rotate(angle)</code> rotates around the z-axis by the supplied <code>angle</code> (specified in radians)</li>
<li><code>scale(sx,sy)</code> scales by <code>sx</code> along the x axis, and <code>sy</code> along the y axis. This is expressed as a decimal value: <code>1.0</code> indicates 100%, <code>0.5</code> for 50%, and <code>1.75</code> for 175%</li>
</ul>
<p><canvas id="example" width="500" height="300"></canvas></p>
<script>
  var canvas = document.getElementById('example');
  var ctx = canvas.getContext('2d');
  
  ctx.font = "40pt Tahoma";
  var metrics = ctx.measureText("Hello Canvas");
  var tx = 100 + metrics.width / 2;
  var ty = 180;
  
  ctx.translate(tx, ty);
  ctx.rotate(Math.PI/4);
  ctx.translate(-tx, -ty);

  ctx.strokeText("Hello Canvas", 100, 180);
</script>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;example&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;500&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;300&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&#34;40pt Tahoma&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">metrics</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="s2">&#34;Hello Canvas&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">+</span> <span class="nx">metrics</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">ty</span> <span class="o">=</span> <span class="mi">180</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">tx</span><span class="p">,</span> <span class="nx">ty</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="o">-</span><span class="nx">tx</span><span class="p">,</span> <span class="o">-</span><span class="nx">ty</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeText</span><span class="p">(</span><span class="s2">&#34;Hello Canvas&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></span></span></code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>In this example, we translate the text so that its center is at the origin <em>before</em> we rotate it, then translate it back. As any rotation we specify is around the origin, this makes it so the text is rotated around its center and stays on canvas, rather than rotating off the canvas.</p>
<p>Also notice that we call the transformation functions in the <em>opposite</em> order we want them applied.</p>
</div>
</div>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cc120/js/clipboard.min.js?1737134839" defer></script>
<script src="/cc120/js/perfect-scrollbar.min.js?1737134839" defer></script>
<script src="/cc120/js/theme.js?1737134839" defer></script>

<script src="/cc120/js/tele-scroll.js?1737134839" defer></script>

</body>
</html>
